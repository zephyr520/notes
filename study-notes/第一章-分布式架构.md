## 第一章 分布式架构
#### 分布式系统定义
> 分布式系统是一个硬件或软件组件分布在不同的网络计算机上，彼此之间仅仅通过消息传递进行通信和协调的系统
##### 分布式特点
- **分布性**
> 分布式系统中的多台计算机都会在空间上随意分布，同时，机器的分布情况也会随时变动。

- **对等性**
> 分布式系统中的计算机没有主/从之分，既没有控制整个系统的主机，也没有被控制的从机，组成分布式系统的所有计算机节点都是对等的。**副本(Replica)**是指分布式系统对数据和服务提供的一种冗余方式。**数据副本**是指在不同的节点上持久化同一份数据，当某一个节点上存储的数据丢失时，可以从副本上读取到该数据，这是解决分布式系统数据丢失问题最为有效的手段。**服务副本**是指多个节点提供同样的服务，每个节点都有能力接受来自外部的请求进行相应的处理。

- **并发性**
> 在一个计算机网络中，程序运行过程中的并发性操作是非常常见的行为，例如：同一个分布式系统中的多个节点，可能会并发地操作一些**共享资源**，如：数据库，分布式存储等，但是如何准确并高效地协调分布式并发操作也成为了分布式系统架构与设计中最大的挑战之一。

- **缺乏全局时钟**
> 分布式系统是由一系列在空间上随意分布的多个进程组成，具有明显的分布性，进程之间通过交换信息来进行相互通信。因此在分布式系统中，很难定义两个事件究竟谁先谁后，原因就是因为分布式系统缺乏一个全局的时钟序列控制。

- **故障总是会发生**
> 组成分布式系统的所有计算机，都有可能发生任何形式的故障。

#### 分布式环境的各种问题

- **通信异常**
> 从集中式到分布式演变过程中，必然引入的**网络因素**，由于网络本身的不可靠性，因此也引入了额外的问题。分布式系统需要在各个节点之间进行网络通信，因此每次网络通信都会伴随着网络不可用的风险，网络光纤，路由器或DNS等硬件设备或是系统不可用都会导致最终分布式系统无法顺利完成一次网络通信。

- **网络分区**
> 当网络发生异常情况，导致分布式系统中部分节点之间的网络延时不断加大，最终导致组成分布式系统的所有节点，只有部分节点之间能够进行正常的通信，而另一些节点则不能----我们将这种现象称为**网络分区**，就是俗称**“脑裂”**

- **三态**
> 因为网络可能会出现各式各样的问题，因此分布式系统的每一次请求与响应，存在特有的”三态“：**成功**、**失败**、**超时**  
> 当网络出现异常的情况下，就可能会出现超时现象，通常会有以下两种情况：  
> 1、由于网络原因，该请求（消息）并没有被成功地发送到接收方，而是在发送过程就发送了消息丢失现象  
> 2、该请求（消息）成功的被接收方接收后，并进行了处理，但是在将响应反馈给发送方的过程中，发生了消息丢失现象。
> 
- **节点故障**
> 节点故障是分布式环境下另一个比较常见的问题，指的是组成分布式系统的服务器节点出现的宕机或“僵死”现象。通常根据经验来说，每个节点都有可能会出现故障，并且每天都在发生。
> 

#### 从ACID到CAP/BASE理论

- **ACID**

> **事务（transaction）**：是有一系列对系统中数据进行访问与更新的操作所组成的一个程序执行逻辑单元（Unit)，狭义上的事务特指数据库事务。
> **事务的四个特征**：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性(Durability)
 
- **原子性**
> 原子性指的是：事务必须是一个原子的操作序列单元。事务中包含的各项操作在一次执行过程中，只允许出现以下两种状态之一：1、全部成功执行；2、全部不执行
